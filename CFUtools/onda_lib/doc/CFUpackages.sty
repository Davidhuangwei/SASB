%%
%% This file is CFUpackages.sty written by Morten F. Rasmussen
%%
%% Version History:
%% V1.0, 2013-03-21, First version. 
%% V1.1, 2013-04-04, Changed font encoding from OT1 to T1, 
%%                   added fixltx2e, hyperref, and microtype packages.
%% V1.2, 2013-04-08, Added the biblatex and babel packages and changed the hyperref settings.
%% V1.3, 2013-04-09, Added xcolor and addraftwatermark packages (previously imported in CFUlayout).
%%


\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{CFUpackages}%
[2013/04/08 v1.2 Imports all standard packages normally used in a CFU document (MOFI).]
\typeout{}
\typeout{-------------------------------CFUpackages Start-------------------------------}
\typeout{CFUpackages, 2013/04/08 v1.2. Imports all standard packages normally used in a CFU document (MOFI).}





\typeout{}
\typeout{Importing etoolbox: Used internally.}
\RequirePackage{etoolbox}

%% Options
\newbool{@CFUbiblatex}
\DeclareOption{biblatex}{\booltrue{@CFUbiblatex}}
\ProcessOptions*\relax






%% Load packages

\typeout{}
\typeout{Importing xcolor: Used to define colors}
\RequirePackage{xcolor}%for colors farver


\typeout{}
\typeout{Importing fontenc: Sets the font encoding the T1}
\RequirePackage[T1]{fontenc}

\typeout{}
\typeout{Importing "babel": sets language specific settings.}
\RequirePackage{babel}


\typeout{}
\typeout{Importing "mathtools": A debugged version of amsmath, plus a lot more! Run "texdoc mathtools".}
\RequirePackage{mathtools}

\typeout{}
\typeout{Importing "amssymbs": Mathematical symbols.}
\RequirePackage{amssymb}

\typeout{}
\typeout{Importing "graphicx": To include figures}
\RequirePackage[final]{graphicx} %force to show images in draft mode

\typeout{}
\typeout{Importing "balance": Use to get equal length of the two last columns (when "twocolumn" is set) with: "balance" command}
\RequirePackage{balance}         %use to get equal length of two last columns with: \balance

\typeout{}
\typeout{Importing "fixme": Use to write notes in the margin with "fxnote" command. Is only visible in draft mode.}
%\PassOptionsToPackage{}{fixme}
\RequirePackage[inline,nomargin]{fixme}% use with \fxnote{}

\typeout{}
\typeout{Importing "times": Set the font to times new roman. This can be overwritten by importing a different font package.}
\RequirePackage{times}%font

\typeout{}
\typeout{Importing "csquotes": Use correct quotation with enquote{text in quotation}}
\RequirePackage{csquotes}

\typeout{}
\typeout{Importing "placeins": provides: "FloatBarrier" command to force placement of floats (figures and tables)}
\RequirePackage{placeins}

\typeout{}
\typeout{Importing "siunitx": provides: "SI{}{}", "num{}" and much, much more! See the manual -especially the section about the use in tables.}
\RequirePackage{siunitx}

\typeout{}
\typeout{Importing "varioref": provides: "vref{}", which writes stuff like "Fig. 3 on the previous page".}
\RequirePackage{varioref} % 

\typeout{}
\typeout{Importing "lipsum": provides: "lipsum", which can be used to set dummy text.} 
\RequirePackage{lipsum}


\typeout{}
\typeout{Importing "listings": used to import source code. Use with the lstinputlisting command.}
\RequirePackage[final]{listings}
\RequirePackage{color}
\definecolor{mygreenn}{rgb}{0,0.6,0}
%\AtBeginDocument{%
  \definecolor{mygreen}{rgb}{0,0.6,0}
  \definecolor{mygray}{rgb}{0.5,0.5,0.5}
  \definecolor{mymauve}{rgb}{0.58,0,0.82}
  \lstset{%
    backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
    basicstyle=\footnotesize,        % the size of the fonts that are used for the code
    breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
    breaklines=true,                 % sets automatic line breaking
    captionpos=b,                    % sets the caption-position to bottom
    commentstyle=\color{mygreen},    % comment style
    deletekeywords={...},            % if you want to delete keywords from the given language
    frame=single,                    % adds a frame around the code
    frameround=tttt,                 % sets rounded frame corners
    keywordstyle=\color{nicered},       % keyword style
    language=matlab,                 % the language of the code
    morekeywords={*,...},            % if you want to add more keywords to the set
    numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
    numbersep=5pt,                   % how far the line-numbers are from the code
    numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
    prebreak =\raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}}, %set hookleftarrow when breaking text 
    rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
    showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
    showstringspaces=false,          % underline spaces within strings only
    showtabs=false,                  % show tabs within strings adding particular underscores
    stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
    stringstyle=\color{mymauve},     % string literal style
    tabsize=2,                       % sets default tabsize to 2 spaces
    title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
  }%}


% LaTeX kernel fixes
\typeout{}
\typeout{Importing "fixltx2e": fixes bugs in the LaTeX2e kernel..}
\RequirePackage{fixltx2e}


\typeout{}
\typeout{Importing "hyperref": Sets Hypertext marks (links).}
\RequirePackage{hyperref}
\hypersetup{%
  breaklinks=true,
  plainpages=false,
  citebordercolor={0.647 0.129 0.149},%{1 1 1}, % 0 1 0 The color of the box around citations
  linkbordercolor={0.647 0.129 0.149},%{1 1 1}, % 1 0 0 The color of the box around normal links
  urlbordercolor={0.647 0.129 0.149},%{1 1 1}, % 0 1 1 The color of the box around links to URLs    
  colorlinks=false, 
  linktocpage=true, %make page number, not text, be link on TOC, LOF and LOT
  pdfstartview={FitB}, % FitB, FitH, FitV, FitBH, FitBV
  bookmarksnumbered=true, % Put section numbers in bookmarks (Default: false).
  bookmarksopen=false, % Open up the bookmark tree (Default: false).
  bookmarksopenlevel=\maxdimen, % Level to which bookmarks are open (Default:
  % \maxdimen). 
  bookmarkstype=toc, % To specify which toc file to mimic (Default: toc).
}



\typeout{}
\typeout{Importing "microtype": Sets optical alignment of margins.}
\RequirePackage{microtype}


\typeout{}
\typeout{Importing draftwatermark: Used to set a watermark in draft mode}
\RequirePackage[firstpage]{draftwatermark}





\ifbool{@CFUbiblatex}{%
  \typeout{}
  \typeout{The biblatex option is set. This requires Biblatex 2.5 and Biber 1.5}
  \typeout{ Importing "biblatex": Biblatex is a complete reimplementation of the bibliographic}
  \typeout{                      facilities provided by LaTeX in conjunction with BibTeX.}
  \RequirePackage[citestyle=authoryear-comp,%
  bibstyle=authoryear,%
  backend=biber, %
  refsection=chapter, %
  hyperref=true, %
  indexing=true, %
  sortcites=true,% Sort citations if multiple entry keys are passed to a citation.
  sorting=nyt,   % Sort by name, year, title.
  backref=true,  % Print back references in the bibliography.
  maxcitenames=3,maxbibnames=99,%
  firstinits=true,%
  uniquename=init,%
%  texencoding=utf8, %
%  bibencoding=utf8
  ,indexing=true %
  ]{biblatex}[2013/01/10]
}


%\typeout{}
\typeout{-------------------------------CFUpackages End--------------------------------}
\typeout{}

\endinput
